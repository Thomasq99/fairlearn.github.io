

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Development process &#8212; Fairlearn 0.4.7.dev0 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery-dataframe.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"E": "{\\mathbb{E}}", "P": "{\\mathbb{P}}", "given": "\\mathbin{\\vert}"}}})</script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing code" href="contributing_code.html" />
    <link rel="prev" title="Fairlearn Repository Overview" href="fairlearn_repository_overview.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../contents.html">
      <img src="../_static/fairlearn_full_color.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../about/index.html">About</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../quickstart.html">Quickstart</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../user_guide/index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../api_reference/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../auto_examples/notebooks/index.html">Example Notebooks</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">Contributor Guide</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://gitter.im/fairlearn/community">Gitter<i class="fas fa-external-link-alt"></i></a>
        </li>
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://stackoverflow.com/questions/tagged/fairlearn">StackOverflow<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/fairlearn/fairlearn" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
      
      
        
          
              <li class="">
                  <a href="ways_to_contribute.html">Ways to contribute</a>
              </li>
          
        
          
              <li class="">
                  <a href="fairlearn_repository_overview.html">Fairlearn Repository Overview</a>
              </li>
          
        
          
              <li class="active">
                  <a href="">Development process</a>
              </li>
          
        
          
              <li class="">
                  <a href="contributing_code.html">Contributing code</a>
              </li>
          
        
          
              <li class="">
                  <a href="contributing_example_notebooks.html">Contributing example notebooks</a>
              </li>
          
        
          
              <li class="">
                  <a href="fairlearn_proposals.html">API and design proposals</a>
              </li>
          
        
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#developer-certificate-of-origin" class="nav-link">Developer certificate of origin</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#advanced-installation-instructions" class="nav-link">Advanced installation instructions</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#investigating-automated-test-failures" class="nav-link">Investigating automated test failures</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#creating-new-releases" class="nav-link">Creating new releases</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="development-process">
<h1>Development process<a class="headerlink" href="#development-process" title="Permalink to this headline">¶</a></h1>
<p>Development happens against the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch following the
<a class="reference external" href="https://guides.github.com/introduction/flow/">GitHub flow model</a>.
Contributors should use their own forks of the repository. In their fork, they
create feature branches off of <code class="code docutils literal notranslate"><span class="pre">master</span></code>, and their pull requests should
target the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch. Maintainers are responsible for prompt
review of pull requests.</p>
<p>Pull requests against <code class="code docutils literal notranslate"><span class="pre">master</span></code> trigger automated tests that are run
through Azure DevOps, GitHub Actions, and CircleCI. Additional test suites are
run periodically. When adding new code paths or features, tests are a
requirement to complete a pull request. They should be added in the
<code class="code docutils literal notranslate"><span class="pre">test</span></code> directory.</p>
<div class="section" id="developer-certificate-of-origin">
<h2>Developer certificate of origin<a class="headerlink" href="#developer-certificate-of-origin" title="Permalink to this headline">¶</a></h2>
<p>Contributions require you to sign a <em>developer certificate of origin</em> (DCO)
declaring that you have the right to, and actually do, grant us the rights to
use your contribution. For details, visit <a class="reference external" href="https://developercertificate.org/">https://developercertificate.org/</a>.</p>
<p>When you submit a pull request, a DCO-bot will automatically determine whether
you need to provide a DCO and decorate the PR appropriately (e.g., label,
comment).</p>
<p>Signing off means you need to have your name and email address attached as a
commit comment, which you can automate using git hooks as shown
<a class="reference external" href="https://stackoverflow.com/questions/15015894/git-add-signed-off-by-line-using-format-signoff-not-working/46536244#46536244">here</a>.</p>
</div>
<div class="section" id="advanced-installation-instructions">
<span id="advanced-install"></span><h2>Advanced installation instructions<a class="headerlink" href="#advanced-installation-instructions" title="Permalink to this headline">¶</a></h2>
<p>While working on Fairlearn itself you may want to install it in editable mode.
This allows you to test the changed functionality. First, clone the repository
locally via</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">fairlearn</span><span class="o">/</span><span class="n">fairlearn</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>To install in editable mode using <code class="code docutils literal notranslate"><span class="pre">pip</span></code> run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>from the repository root path.</p>
<p>To verify that the code works as expected run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="o">-</span><span class="n">s</span> <span class="o">./</span><span class="n">test</span><span class="o">/</span><span class="n">unit</span>
</pre></div>
</div>
<p>Fairlearn currently includes plotting functionality that requires the
<code class="code docutils literal notranslate"><span class="pre">matplotlib</span></code> package to be installed. Since this is for a niche use case
Fairlearn comes without <code class="code docutils literal notranslate"><span class="pre">matplotlib</span></code> by default. To install Fairlearn
with its full feature set simply append <code class="code docutils literal notranslate"><span class="pre">customplots</span></code> to the install
command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="p">[</span><span class="n">customplots</span><span class="p">]</span>
</pre></div>
</div>
<p>Note that the Fairlearn dashboard is built using nodejs and requires
additional steps. To build the Fairlearn dashboard after making changes to it,
<a class="reference external" href="https://yarnpkg.com/lang/en/docs/install">install Yarn</a>, and then run the
<a class="reference external" href="https://github.com/fairlearn/fairlearn/tree/master/scripts/build_widget.py">widget build script</a>.</p>
<details id="onboarding-guide">
<summary>
<strong>
<em><p>Onboarding guide for users of version 0.2 or earlier</p>
</em>
</strong>
</summary><p>Up to version 0.2, Fairlearn contained only the exponentiated gradient method.
The Fairlearn repository now has a more comprehensive scope and aims to
incorporate other methods. The same exponentiated gradient technique is now
the class <code class="code docutils literal notranslate"><span class="pre">fairlearn.reductions.ExponentiatedGradient</span></code>. While in the past
exponentiated gradient was invoked via</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">fairlearn.classred</span> <span class="kn">import</span> <span class="n">expgrad</span>
<span class="kn">from</span> <span class="nn">fairlearn.moments</span> <span class="kn">import</span> <span class="n">DP</span>

<span class="n">estimator</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>  <span class="c1"># or any other estimator</span>
<span class="n">exponentiated_gradient_result</span> <span class="o">=</span> <span class="n">expgrad</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">sensitive_features</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">estimator</span><span class="p">,</span> <span class="n">constraints</span><span class="o">=</span><span class="n">DP</span><span class="p">())</span>
<span class="n">positive_probabilities</span> <span class="o">=</span> <span class="n">exponentiated_gradient_result</span><span class="o">.</span><span class="n">best_classifier</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">randomized_predictions</span> <span class="o">=</span> <span class="p">(</span><span class="n">positive_probabilities</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">positive_probabilities</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">1</span>
</pre></div>
</div>
<p>the equivalent operation is now</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fairlearn.reductions</span> <span class="kn">import</span> <span class="n">ExponentiatedGradient</span><span class="p">,</span> <span class="n">DemographicParity</span>

<span class="n">estimator</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>  <span class="c1"># or any other estimator</span>
<span class="n">exponentiated_gradient</span> <span class="o">=</span> <span class="n">ExponentiatedGradient</span><span class="p">(</span><span class="n">estimator</span><span class="p">,</span> <span class="n">constraints</span><span class="o">=</span><span class="n">DemographicParity</span><span class="p">())</span>
<span class="n">exponentiated_gradient</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sensitive_features</span><span class="o">=</span><span class="n">sensitive_features</span><span class="p">)</span>
<span class="n">randomized_predictions</span> <span class="o">=</span> <span class="n">exponentiated_gradient</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p>Please open a <a class="reference external" href="https://github.com/fairlearn/fairlearn/issues">new issue</a> if
you encounter any problems.</p>
</details></div>
<div class="section" id="investigating-automated-test-failures">
<h2>Investigating automated test failures<a class="headerlink" href="#investigating-automated-test-failures" title="Permalink to this headline">¶</a></h2>
<p>For every pull request to <code class="code docutils literal notranslate"><span class="pre">master</span></code> with automated tests, you can check
the logs of the tests to find the root cause of failures. Our tests currently
run through Azure Pipelines with steps for setup, testing, and teardown. The
<code class="code docutils literal notranslate"><span class="pre">Checks</span></code> tab of a pull request contains a link to the
<a class="reference external" href="dev.azure.com/responsibleai/fairlearn/_build/results">Azure Pipelines page</a>),
where you can review the logs by clicking on a specific step in the automated
test sequence. If you encounter problems with this workflow, please reach out
through <a class="reference external" href="https://github.com/fairlearn/fairlearn/issues">GitHub issues</a>.</p>
<p>To run the same tests locally, find the corresponding pipeline definition (a
<code class="code docutils literal notranslate"><span class="pre">yml</span></code> file) in the <code class="code docutils literal notranslate"><span class="pre">devops</span></code> directory. It either directly contains
the command to execute the tests (usually starting with
<code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code>) or it refers to a template file with the command.</p>
</div>
<div class="section" id="creating-new-releases">
<h2>Creating new releases<a class="headerlink" href="#creating-new-releases" title="Permalink to this headline">¶</a></h2>
<p>First add a description of the changes introduced in the package version you
want to release to <a class="reference external" href="https://github.com/fairlearn/fairlearn/CHANGES.md">CHANGES.md</a>.</p>
<p>It is also best to verify that the Fairlearn dashboard loads correctly. This
is slightly involved:</p>
<ol class="arabic simple">
<li><p>Install the <code class="code docutils literal notranslate"><span class="pre">wheel</span></code> package by running <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">wheel</span></code></p></li>
<li><p>Create a wheel by running <code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">sdist</span> <span class="pre">bdist_wheel</span></code> from
the repository root. This will create a <code class="code docutils literal notranslate"><span class="pre">dist</span></code> directory which
contains a <code class="code docutils literal notranslate"><span class="pre">.whl</span></code> file.</p></li>
<li><p>Create a new conda environment for the test</p></li>
<li><p>In this new environment, install this wheel by running
<code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">dist/&lt;FILENAME&gt;.whl</span></code></p></li>
<li><p>Install any pip packages required for the notebooks using
<code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
<li><p>Check that the dashboard loads in the notebooks</p></li>
</ol>
<p>We have an
<a class="reference external" href="https://dev.azure.com/responsibleai/fairlearn/_build?definitionId=60&amp;_a=summary">Azure DevOps Pipeline</a>
which takes care of building wheels and pushing to PyPI. Validations are also
performed prior to any deployments, and also following the uploads to Test-PyPI
and PyPI. To use it:</p>
<ol class="arabic simple">
<li><p>Ensure that <cite>fairlearn/__init__.py</cite> has the correct version set.</p></li>
<li><p>Put down a tag corresponding to this version but preprended with <code class="code docutils literal notranslate"><span class="pre">v</span></code>.
For example, version <code class="code docutils literal notranslate"><span class="pre">0.5.0</span></code> should be tagged with <code class="code docutils literal notranslate"><span class="pre">v0.5.0</span></code>.</p></li>
</ol>
<p>At queue time, select Test or Production PyPI as appropriate.</p>
<p>As part of the release process, the <code class="code docutils literal notranslate"><span class="pre">build_wheels.py</span></code> script uses
<code class="code docutils literal notranslate"><span class="pre">process_readme.py</span></code> to turn all the relative links in the ReadMe file
into absolute ones (this is the reason why the applied tag has be of the form
<code class="code docutils literal notranslate"><span class="pre">v[__version__]</span></code>). The <code class="code docutils literal notranslate"><span class="pre">process_readme.py</span></code> script is slightly
fragile with respect to the contents of the ReadMe, so after significant
changes its output should be verified.</p>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2019, Microsoft Corporation and contributors..<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>